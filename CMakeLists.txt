cmake_minimum_required(VERSION 3.13)
project(LedMatrix)

# Tell PlatformIO where to find the project
set(ENV{PLATFORMIO_PROJECT_DIR} "${CMAKE_CURRENT_LIST_DIR}")

# Run 'pio project init' via CMake to ensure everything is synced
execute_process(COMMAND pio project init --ide clion
        WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
)

# Include the file generated by PlatformIO
if(EXISTS "${CMAKE_CURRENT_LIST_DIR}/CMakeListsPrivate.txt")
    include("${CMAKE_CURRENT_LIST_DIR}/CMakeListsPrivate.txt")
endif()
